<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Order placed â€¢ StockY</title>
  <link rel="stylesheet" href="/style.css" />
  <script defer src="/transition.js"></script>
  <script defer src="/script.js"></script>
</head>
<body>

  <!-- ================= HEADER ================= -->
  <header class="site-header">
    <div class="container nav">
      <div class="nav__brand">
        <a href="/index.html" class="nav__home-link">
          <img src="/assets/logo.png" alt="StockY logo" class="nav__logo-img" />
        </a>
        <strong>StockY</strong>
      </div>

      <label class="nav__search" aria-label="Search">
        <svg width="16" height="16" aria-hidden="true">
          <circle cx="7" cy="7" r="6" stroke="currentColor" fill="none" />
          <line x1="12" y1="12" x2="15" y2="15" stroke="currentColor" />
        </svg>
        <input type="search" placeholder="Search sneakers, brandsâ€¦" />
      </label>

      <div class="nav__cta">
        <a class="btn" href="/login.html">Login</a>
        <a class="btn btn--primary" href="/register.html">Sign Up</a>
        <button id="theme-toggle" class="btn" title="Theme">ðŸŒ™</button>
      </div>
    </div>

    <nav class="category-bar">
      <div class="container category-bar__inner">
        <a href="/index.html">All</a>
        <a href="/products/brands.html">Brands</a>
        <a href="/products/trending.html">Trending</a>
        <a href="/products/mens.html">Mens</a>
        <a href="/products/womens.html">Womens</a>
        <a href="/products/kids.html">Kids</a>
      </div>
    </nav>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="container page">
    <section class="panel" style="text-align:center">
      <h1 class="section__title">Thank you! ðŸŽ‰</h1>
      <p class="helper-text">Your order has been placed. A confirmation email is on its way.</p>
      <p id="orderMeta" class="helper-text"></p>
    </section>

    <section class="panel" id="orderPanel" style="max-width:800px;margin-inline:auto">
      <h2 class="section__title" style="text-align:left">Order summary</h2>

      <ul id="orderItems" class="summary-items"></ul>

      <div class="totals" style="margin-top:1rem">
        <div><span>Subtotal</span><span id="cSub">$0.00</span></div>
        <div><span>Shipping</span><span id="cShip">$0.00</span></div>
        <div><span>Discount</span><span id="cDisc">-$0.00</span></div>
        <hr>
        <div class="grand"><span>Total</span><span id="cTotal">$0.00</span></div>
      </div>

      <div style="margin-top:1.25rem;display:flex;gap:.5rem;justify-content:center">
        <a class="btn" href="/index.html">Back to Home</a>
        <a class="btn btn--primary" href="/product.html">Shop more</a>
      </div>
    </section>
  </main>

  <!-- ================= FOOTER ================= -->
<footer class="site-footer">
  <nav class="footer-nav">
    <a href="/index.html">Home</a>
    <a href="/products/brands.html">Shop</a>
    <a href="/faq.html">FAQ</a>
    <a href="/contact.html">Contact</a>
    <a href="/about.html">Our Story</a>
    <a href="/terms.html">Terms</a>
    <a href="/privacy.html">Privacy</a>
  </nav>
</footer>


  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const meta = document.getElementById("orderMeta");
      const list = document.getElementById("orderItems");
      const cSub = document.getElementById("cSub");
      const cShip = document.getElementById("cShip");
      const cDisc = document.getElementById("cDisc");
      const cTotal = document.getElementById("cTotal");

      let order = null;
      try {
        order = JSON.parse(localStorage.getItem("lastOrder") || "null");
      } catch {
        order = null;
      }

      if (!order || !order.items || !order.items.length) {
        window.location.replace("/product.html");
        return;
      }

      const fmt = (n) => `$${Number(n).toFixed(2)}`;
      const placed = new Date(order.placedAt || Date.now());

      meta.textContent = `Order #${(order.id || placed.getTime()).toString().slice(-8)} â€¢ Placed on ${placed.toLocaleString()}`;

      list.innerHTML = "";
      for (const it of order.items) {
        const li = document.createElement("li");
        li.className = "summary-item";
        li.innerHTML = `
          <div class="thumbbox">
            <img src="${it.thumb}" alt="${it.title}" style="width:40px;height:40px;object-fit:cover;border-radius:.4rem" />
          </div>
          <div class="meta">
            <div class="title">${it.title}</div>
            <div class="muted">Size ${it.size} â€¢ Qty ${it.qty || 1}</div>
          </div>
          <div class="price">${fmt(Number(it.price) * (Number(it.qty) || 1))}</div>
        `;
        list.appendChild(li);
      }

      cSub.textContent = fmt(order.subtotal || 0);
      cShip.textContent = fmt(order.shipping || 0);
      cDisc.textContent = `-${fmt(Math.abs(order.discount || 0)).slice(1)}`;
      cTotal.textContent = fmt(order.total || 0);

      localStorage.removeItem("cart"); // clear cart after order
    });
  </script>

</body>
</html>
